"use strict";(self.webpackChunkiframe_api_docs=self.webpackChunkiframe_api_docs||[]).push([[2285],{12530:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"frontend/API","title":"iframe URL","description":"The URL to use inside the iframe element:","source":"@site/get-started/frontend/API.mdx","sourceDirName":"frontend","slug":"/frontend/API","permalink":"/iframe-doc/frontend/API","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"iframe URL","sidebar_position":1,"hide_table_of_contents":false},"sidebar":"defaultSidebar","previous":{"title":"API frontend","permalink":"/iframe-doc/category/api-frontend"},"next":{"title":"Authorization","permalink":"/iframe-doc/frontend/auth"}}');var t=i(74848),o=i(28453);const s={title:"iframe URL",sidebar_position:1,hide_table_of_contents:!1},d=void 0,l={},a=[{value:"<code>domain</code>",id:"domain",level:3},{value:"<code>path</code>",id:"path",level:3},{value:"<code>lng</code>",id:"lng",level:3},{value:"<code>token</code>",id:"token",level:3},{value:"<code>sign</code>",id:"sign",level:3},{value:"<code>logout</code>",id:"logout",level:3},{value:"<code>platform_type</code>",id:"platform_type",level:3},{value:"<code>bgColor</code>",id:"bgcolor",level:3},{value:"iframe domain",id:"iframe-domain",level:2},{value:"Signature algorithm",id:"signature-algorithm",level:2}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"The URL to use inside the iframe element:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://{domain}/{lng}/{path}?lng={lng}&token={token}&sign={sign}\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"URI-encode values of path parameters."})}),"\n",(0,t.jsx)(n.h3,{id:"domain",children:(0,t.jsx)(n.code,{children:"domain"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"required"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Your domain to access the iframe."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"#iframe-domain",children:"iframe domain"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"path",children:(0,t.jsx)(n.code,{children:"path"})}),"\n",(0,t.jsx)(n.p,{children:"Path to the site section that will be displayed in the iframe."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"path"}),(0,t.jsx)(n.th,{children:"section name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"wallet"}),(0,t.jsx)(n.td,{children:"User wallet"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"history"}),(0,t.jsx)(n.td,{children:"Payment History"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"news"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"market"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"lng",children:(0,t.jsx)(n.code,{children:"lng"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"required for authorized requests"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"ISO2 language code."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"/{lng1}?lng={lng2}"})}),"\n",(0,t.jsxs)(n.p,{children:["To switch the language of the interface, use the path parameter ",(0,t.jsx)(n.code,{children:"lng1"}),".\nThe query parameter ",(0,t.jsx)(n.code,{children:"lng2"})," doesn't affect the interface language.\nIt's forwarded to the ",(0,t.jsx)(n.a,{href:"/en/category/api-backend",children:"Backend API"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If you don't provide a language in ",(0,t.jsx)(n.code,{children:"lng1"}),", the iframe will determine it from the\nbrowser settings and perform a redirect (code 302) to add the automatically\ndetermined ",(0,t.jsx)(n.code,{children:"lng1"})," value to the path."]}),"\n",(0,t.jsx)(n.h3,{id:"token",children:(0,t.jsx)(n.code,{children:"token"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"required for authorized requests"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The token required to authorize the user."}),"\n",(0,t.jsxs)(n.p,{children:["By default, some sections can be viewed by an unauthorized user \u2014 for this, it\nis enough not to send a ",(0,t.jsx)(n.code,{children:"token"})," in the request."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"/history"})," and ",(0,t.jsx)(n.code,{children:"/wallet"})," are only to authorized users: only with a valid ",(0,t.jsx)(n.code,{children:"token"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/frontend/auth",children:"Authorization"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"sign",children:(0,t.jsx)(n.code,{children:"sign"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"required for authorized requests"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Request signature."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"#signature-algorithm",children:"Signature Algorithm"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"logout",children:(0,t.jsx)(n.code,{children:"logout"})}),"\n",(0,t.jsx)(n.p,{children:"Initiate user logout."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"/{lng1}?logout=1"})}),"\n",(0,t.jsxs)(n.p,{children:["This command attempts to log out the user, by ending their current session.\nWhen used, the iframe transitions into a demo mode. The ",(0,t.jsx)(n.code,{children:"token"})," query parameter\nis not relevant in this context and will be disregarded."]}),"\n",(0,t.jsx)(n.h3,{id:"platform_type",children:(0,t.jsx)(n.code,{children:"platform_type"})}),"\n",(0,t.jsx)(n.p,{children:"The type of platform. Possible values:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"mobile"})," \u2014 to get the mobile version of the iframe"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"desktop"})," \u2014 to get the desktop version of the iframe"]}),"\n",(0,t.jsx)(n.li,{children:"not provided \u2014 the platform type will be determined automatically"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The provided value is stored in the ",(0,t.jsx)(n.code,{children:"platform_type"})," cookie for up to 4 days."]}),"\n",(0,t.jsx)(n.h3,{id:"bgcolor",children:(0,t.jsx)(n.code,{children:"bgColor"})}),"\n",(0,t.jsxs)(n.p,{children:["Background color of a widget content. Any valid value of\n",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/background-color",children:(0,t.jsx)(n.code,{children:"background-color"})}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"iframe-domain",children:"iframe domain"}),"\n",(0,t.jsx)(n.p,{children:"There are 2 placement options for accessing the iframe. In both cases, the\niframe is hosted on your domain."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 1. Hosting on your subdomain"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["This hosting option will save you from problems with\n",(0,t.jsx)(n.a,{href:"/frontend/faq",children:"recording cross-domain cookies in some browsers"}),".\nHowever, it depends on your registrar \u2014 some registrars do not allow you to\nspecify IP for subdomains."]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You have a registered domain."}),"\n",(0,t.jsx)(n.li,{children:"We provide you with an IP address."}),"\n",(0,t.jsx)(n.li,{children:"You register this IP on a subdomain of original domain."}),"\n",(0,t.jsx)(n.li,{children:"You buy and send us an SSL certificate for this subdomain."}),"\n",(0,t.jsx)(n.li,{children:"We add mirror domains on our side with provided certificate."}),"\n",(0,t.jsx)(n.li,{children:"You send us new SSL certificate when the old one runs out (paid \u2014 once a\nyear, free \u2014 once every 3 months)."}),"\n",(0,t.jsx)(n.li,{children:"We notify you when you need to change the IP on subdomains (this does not\nhappen often)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 2. Hosting on your domain"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You have a registered domain."}),"\n",(0,t.jsx)(n.li,{children:"We provide you with DNS NS records."}),"\n",(0,t.jsx)(n.li,{children:"You specify NS records for your domain, after that requests to the domain\nare redirected to our IP address."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"signature-algorithm",children:"Signature algorithm"}),"\n",(0,t.jsx)(n.p,{children:"When authenticating a user with a token, you must include a signature in the\nrequest."}),"\n",(0,t.jsx)(n.p,{children:"The signature is formed as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sign = md5(lng={lng}&token={token}{secret})\n"})}),"\n",(0,t.jsx)(n.p,{children:"Where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"secret"})," \u2014 a secret string provided to you when connecting to the API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"md5"})," \u2014 the function to compute the MD5 hash of a string"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsx)(n.p,{children:"The order of parameters when forming the signature string is strictly fixed.\nPlease adhere to the specified order as shown above."})}),"\n",(0,t.jsxs)(n.p,{children:["When transforming parameter values, ensure compliance with\n",(0,t.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc1738",children:"RFC 1738"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",metastring:'title="Example"',children:"<?php\n/*\n\n*  domain:'https://iframe.com'\n*  token: '1q2w3e'\n*  lng: 'ru'\n*  secret: 'test_secret'\n\n*/\n\n\n$params = ['lng'=> 'en', 'token' => '1q2w3e'];\n$params['sign'] = md5(http_build_query($params).'test_secret');\n\n// $src = 'https://iframe.com/en?lng=en&token=1q2w3e&sign=3ec84273bf0043d4936a8486b8741bb7'\n$src = 'https://iframe.com/en'?.http_build_query($params);\n?>\n\n<iframe src=\"<?= $src; ?>\"></iframe>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>d});var r=i(96540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);