```mermaid
stateDiagram-v2
  state Calculation {
    [*] --> refund
    [*] --> credit
    [*] --> debt
  }


  [*] --> payment

  payment --> Calculation
  payment --> sale
  payment --> deleted

  sale --> [*]

  deleted --> [*]

  refund --> credit: recalculation
  refund --> [*]

  debt --> credit: recalculation
  debt --> [*]

  credit --> refund: recalculation
  credit --> debt: recalculation
  credit --> [*]
```
