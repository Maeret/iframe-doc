openapi: 3.1.0
info:
  title: IFRAME backend api
  version: '1.0'
servers:
  - url: http://partner-domain.com
    description: ''
webhooks:
  /GetUserData:
    post:
      summary: /GetUserData
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  userId:
                    type: integer
                    description: |
                      User ID on your system
                  currency:
                    type: string
                    description: User currency code in ISO 4217
                    example: EUR
                  token2:
                    type: string
                    description: >-
                      User token that will then be returned by the IFRAME
                      Service in the /MakePayment and /GetBalance methods
                  country:
                    type: string
                    description: Registration country code in ISO 3166-1 alpha-2
                    example: ES
                  city:
                    type: string
                    description: User city
                    example: Madrid
                  ip:
                    type: string
                    description: User IP
                    example: 213.192.202.121
                  dopInfo:
                    type: string
                    deprecated: true
                  success:
                    type: boolean
                    description: The result of processing the request by your service
                  description:
                    type: string
                    description: >
                      Description of the request processing result

                      > The field is logged on the IFRAME Service side. You can
                      enter the error information you need here for debugging.
                    nullable: true
                  errorCode:
                    type: integer
                    enum:
                      - 0
                      - 1
                      - 4
                    description: |
                      Error code: 
                       * `0` - no error. Send `errorCode: 0` or do not send the `errorCode` field if the request is correctly processed by your service. Do not send `errorCode: null`.
                      * `1` - invalid 'token1' received;
                      * `4` - invalid signature `sign`.
                  minbet:
                    type: number
                    format: decimal
                    description: >
                      Minimum bid per user

                      > The ability to limit the minimum and maximum bid can be
                      enabled upon request. Please contact us.
                    example: 0.2
                  maxbet:
                    type: number
                    format: decimal
                    description: >
                      Maximum bid per user

                      > The ability to limit the minimum and maximum bid can be
                      enabled upon request. Please contact us.
                    example: 1000
                  minMaxCurrency:
                    type: string
                    description: >
                      Currency `minbet` and `maxbet` in ISO 4217

                      > The ability to limit the minimum and maximum payment can
                      be enabled upon request. Please contact us.
                    example: USD
                    nullable: true
                  tel:
                    type: string
                    description: >
                      User's phone number **without country code**. The IFRAME
                      Service determines the country code from `country`.
                    example: '965065787'
                    nullable: true
                  email:
                    type: string
                    description: |
                      User's mail
                    example: example@nomail.com
                    nullable: true
                  firstName:
                    type: string
                    description: First name
                    example: Robert
                    nullable: true
                  lastName:
                    type: string
                    description: Last name
                    example: Dawson
                    nullable: true
                required:
                  - userId
                  - currency
                  - token2
                  - country
              example:
                userId: 12345
                currency: EUR
                token2: string
                country: ES
                city: Madrid
                ip: 213.192.202.121
                dopInfo: string
                success: true
                description: string
                minbet: 0.2
                maxbet: 1000
                minMaxCurrency: USD
                tel: '965065787'
                email: example@nomail.com
                firstName: Robert
                lastName: Dawson
                errorCode: 0
      operationId: GetUserData
      description: Getting user data by IFRAME Service
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token1:
                  type: string
                  description: >
                    User token received in iframe URL

                    > [More about authorization in
                    iframe](/en/get-started/frontend/auth)
                sign:
                  type: string
                  description: >
                    Request signature performed by the IFRAME Service

                    > [Read more about request
                    signing](/en/get-started/backend/sign)
                  example: IznVfVDbrKDoGJZus8qplQ==
                time:
                  type: integer
                  description: >
                    The time at which the request was created on the IFRAME
                    Service side
                  example: 1451034874
            example:
              token1: string
              sign: IznVfVDbrKDoGJZus8qplQ==
              time: 1451034874
  /MakePayment:
    post:
      summary: /MakePayment
      tags: []
      description: Transactions
      operationId: MakePayment
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    description: The result of processing the request by your service
                    example: false
                  description:
                    type: string
                    description: >
                      Description of the request processing result

                      > The field is logged on the IFRAME Service side. You can
                      enter the error information you need here for debugging.
                    nullable: true
                  errorCode:
                    type: integer
                    description: |-
                      Error code: 
                       * `0` - no error. Send `errorCode: 0` or do not send the `errorCode` field if the request is correctly processed by your service. Do not send `errorCode: null`.
                      * `1` - invalid `token1` or `token2` received;
                      * `2` - `betId` has already been processed;
                      * `3` - insufficient account balance;
                      * `4` - invalid signature `sign`;
                       * `6` - limit on the amount of a single payment;
                      > See [payment Limits](/en/get-started/backend/limits)
                      * `7` - daily limit on the total amount of payment;
                      > See [payment Limits](/en/get-started/backend/limits)
                      * `8` - loss limit;
                      > See [payment Limits](/en/get-started/backend/limits) 
                      * `9` - self-imposed limit;
                      > See [payment Limits](/en/get-started/backend/limits)
                      * `10` - user profile is not verified.
                      > See [payment Limits](/en/get-started/backend/limits)
                    enum:
                      - 0
                      - 1
                      - 2
                      - 3
                      - 4
                required:
                  - success
              example: null
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  description: |
                    Transaction type.
                    > [More about transactions](/backend/payments) 
                  enum:
                    - payment
                    - win
                    - loss
                    - refund
                    - sale
                    - deleted
                betId:
                  type: number
                  format: ulong
                  description: payment ID in wallet provider system
                  example: 26572710223
                token2:
                  type: string
                  description: >-
                    Token received by the IFRAME Service in response to the
                    request
                    [/GetUserData](/en/get-started/backend/API#operation/GetUserData)
                  example: E7587B42-9E13-4FA8-BD0A-38247829A564
                betInfo:
                  type: string
                  nullable: true
                  description: >
                    payment info. The default language is English.

                    > The language of `betInfo` can be changed upon request.
                    Please contact us.
                  example: >-
                    [{"Coef":2.3,"CouponType":"Single","DateStart":1538609400,"Event":"W1","GameName":"NHL.  
                    Washington Capitals - Boston Bruins  
                    ","Score":"0-0","SportName":"Ice Hockey"}]
                summ:
                  type: string
                  example: 10
                  description: transaction(s) amount
                totalCoef:
                  type: string
                  description: Overall transaction details
                  example: '2.3'
                time:
                  type: integer
                  example: 1451034874
                  description: >
                    The time at which the request was created on the IFRAME
                    Service side
                sign:
                  type: string
                  description: >
                    Request signature performed by the IFRAME Service

                    > [Read more about request
                    signing](/en/get-started/backend/sign)
                  example: IznVfVDbrKDoGJZus8qplQ==
  /GetBalance:
    post:
      summary: /GetBalance
      tags: []
      description: Getting the user's current balance by the IFRAME Service
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  balance:
                    type: integer
                    format: decimal
                    description: Current user balance
                    example: 223.5
                  success:
                    type: boolean
                    description: The result of processing the request by your service
                  description:
                    type: string
                    description: >
                      Description of the request processing result

                      > The field is logged on the IFRAME Service side. You can
                      enter the error information you need here for debugging.
                    nullable: true
                  errorCode:
                    type: integer
                    enum:
                      - 0
                      - 1
                      - 4
                    description: |
                      Error code:  
                       * `0` - no error. Send `errorCode: 0` or do not send the `errorCode` field if the request is correctly processed by your service. Do not send `errorCode: null`.
                      * `1` - invalid `token1` or `token2` received;
                      * `4` - invalid signature `sign`;
              example:
                balance: 223.5
                success: true
                errorCode: 0
      operationId: GetBalance
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token2:
                  type: string
                  description: >-
                    Token received by the IFRAME Service in response to the
                    request
                    [/GetUserData](/en/get-started/backend/API#operation/GetUserData)
                  example: E7587B42-9E13-4FA8-BD0A-38247829A564
                sign:
                  type: string
                  description: >
                    Request signature performed by the IFRAME Service

                    > [Read more about request
                    signing](/en/get-started/backend/sign)
                  example: IznVfVDbrKDoGJZus8qplQ==
                time:
                  type: integer
                  description: >
                    The time at which the request was created on the IFRAME
                    Service side
                  example: 1451034874
            example:
              token2: E7587B42-9E13-4FA8-BD0A-38247829A564
              sign: IznVfVDbrKDoGJZus8qplQ==
              time: 1451034874
components:
  schemas: {}
  examples:
    GetUserDataRequest:
      token1: string
      sign: IznVfVDbrKDoGJZus8qplQ==
      time: 1451034874
    GetUserDataResponse:
      userId: 12345
      currency: EUR
      token2: string
      country: ES
      city: Madrid
      ip: 213.192.202.121
      dopInfo: string
      success: true
      description: string
      minbet: 0.2
      maxbet: 1000
      minMaxCurrency: USD
      tel: '965065787'
      email: example@nomail.com
      firstName: Robert
      lastName: Dawson
      errorCode: 0
    MakePaymentRequest: null
    MakePaymentResponse: null
    GetBalanceRequest:
      token2: E7587B42-9E13-4FA8-BD0A-38247829A564
      sign: IznVfVDbrKDoGJZus8qplQ==
      time: 1451034874
    GetBalanceResponse:
      balance: 223.5
      success: true
      errorCode: 0
